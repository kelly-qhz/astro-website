---
// URL ç»“æ„ï¼š
//   /        -> zhï¼ˆé»˜è®¤è¯­è¨€ï¼‰
//   /en/     -> en é¦–é¡µ
//   /en/...  -> en å…¶ä»–é¡µé¢
// æ ¹æ®å½“å‰è·¯å¾„æ¨æ–­è¯­è¨€ï¼Œå¹¶ç”Ÿæˆå¯¹åº”è¯­è¨€çš„é“¾æ¥ã€‚

const url = Astro.url;
const pathname = url.pathname;
console.log(url);


const isEnglish = pathname === '/en' || pathname.startsWith('/en/');
let currentLocale: 'zh' | 'en' = isEnglish ? 'en' : 'zh';

// å»æ‰ /en å‰ç¼€ï¼Œå¾—åˆ°åŸºç¡€è·¯å¾„ï¼ˆç¡®ä¿è‡³å°‘ä¸º '/'ï¼‰
let basePath = isEnglish ? pathname.slice(3) : pathname; // removes '/en'
if (!basePath || basePath.length === 0) basePath = '/';

const targetLocale = currentLocale === 'zh' ? 'en' : 'zh';
const targetHref =
	targetLocale === 'en'
		? `/en${basePath === '/' ? '/' : basePath}`
		: basePath;

const labels = {
	zh: {
		button: 'åˆ‡æ¢ä¸ºè‹±æ–‡',
	},
	en: {
		button: 'Switch to Chinese',
	},
};

const text = labels[currentLocale].button;
---

<a
	href={targetHref}
	class="lang-switcher"
	aria-label={text}
>
	ğŸŒ {text}
</a>

<style>
	.lang-switcher {
		display: inline-flex;
		align-items: center;
		gap: 0.35rem;
		padding: 0.45rem 0.9rem;
		border-radius: 999px;
		border: 1px solid #e5e7eb;
		background: #111827;
		color: #fff;
		font-size: 0.9rem;
		text-decoration: none;
		cursor: pointer;
		transition: background 0.15s ease, transform 0.1s ease,
			box-shadow 0.15s ease;
		box-shadow: 0 8px 16px rgba(15, 23, 42, 0.15);
	}

	.lang-switcher:hover {
		background: #0f172a;
		transform: translateY(-1px);
		box-shadow: 0 12px 22px rgba(15, 23, 42, 0.22);
	}

	.lang-switcher:active {
		transform: translateY(0);
		box-shadow: 0 4px 10px rgba(15, 23, 42, 0.2);
	}
</style>


